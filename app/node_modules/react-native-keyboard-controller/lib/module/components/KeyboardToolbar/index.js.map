{"version":3,"names":["React","useCallback","useEffect","useMemo","useState","StyleSheet","Text","View","FocusedInputEvents","useKeyboardState","KeyboardController","KeyboardStickyView","Arrow","Button","colors","DEFAULT_OPACITY","KEYBOARD_HAS_ROUNDED_CORNERS","KEYBOARD_TOOLBAR_HEIGHT","OPENED_OFFSET","TEST_ID_KEYBOARD_TOOLBAR","TEST_ID_KEYBOARD_TOOLBAR_CONTENT","TEST_ID_KEYBOARD_TOOLBAR_DONE","TEST_ID_KEYBOARD_TOOLBAR_NEXT","TEST_ID_KEYBOARD_TOOLBAR_PREVIOUS","KeyboardToolbar","props","content","theme","doneText","button","icon","showArrows","onNextCallback","onPrevCallback","onDoneCallback","blur","opacity","offset","closed","opened","enabled","insets","rest","colorScheme","state","appearance","inputs","setInputs","current","count","isPrevDisabled","isNextDisabled","subscription","addListener","e","remove","doneStyle","styles","doneButton","color","primary","toolbarStyle","toolbar","backgroundColor","background","paddingLeft","left","paddingRight","right","floating","containerStyle","marginLeft","marginRight","ButtonContainer","IconContainer","onPressNext","event","isDefaultPrevented","setFocusTo","onPressPrev","onPressDone","dismiss","createElement","style","_extends","testID","arrows","accessibilityHint","accessibilityLabel","disabled","onPress","type","flex","rippleRadius","doneButtonContainer","maxFontSizeMultiplier","create","position","bottom","alignItems","width","flexDirection","height","fontWeight","fontSize","alignSelf","borderRadius","overflow","DefaultKeyboardToolbarTheme"],"sources":["index.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { StyleSheet, Text, View } from \"react-native\";\n\nimport { FocusedInputEvents } from \"../../bindings\";\nimport { useKeyboardState } from \"../../hooks\";\nimport { KeyboardController } from \"../../module\";\nimport KeyboardStickyView from \"../KeyboardStickyView\";\n\nimport Arrow from \"./Arrow\";\nimport Button from \"./Button\";\nimport { colors } from \"./colors\";\nimport {\n  DEFAULT_OPACITY,\n  KEYBOARD_HAS_ROUNDED_CORNERS,\n  KEYBOARD_TOOLBAR_HEIGHT,\n  OPENED_OFFSET,\n  TEST_ID_KEYBOARD_TOOLBAR,\n  TEST_ID_KEYBOARD_TOOLBAR_CONTENT,\n  TEST_ID_KEYBOARD_TOOLBAR_DONE,\n  TEST_ID_KEYBOARD_TOOLBAR_NEXT,\n  TEST_ID_KEYBOARD_TOOLBAR_PREVIOUS,\n} from \"./constants\";\n\nimport type { HEX, KeyboardToolbarTheme } from \"./types\";\nimport type { KeyboardStickyViewProps } from \"../KeyboardStickyView\";\nimport type { ReactNode } from \"react\";\nimport type { GestureResponderEvent, ViewProps } from \"react-native\";\n\ntype SafeAreaInsets = {\n  left: number;\n  right: number;\n};\n\nexport type KeyboardToolbarProps = Omit<\n  ViewProps,\n  \"style\" | \"testID\" | \"children\"\n> & {\n  /** An element that is shown in the middle of the toolbar. */\n  content?: React.JSX.Element | null;\n  /** A set of dark/light colors consumed by toolbar component. */\n  theme?: KeyboardToolbarTheme;\n  /** Custom text for done button. */\n  doneText?: ReactNode;\n  /** Custom touchable component for toolbar (used for prev/next/done buttons). */\n  button?: typeof Button;\n  /** Custom icon component used to display next/prev buttons. */\n  icon?: typeof Arrow;\n  /**\n   * Whether to show next and previous buttons. Can be useful to set it to `false` if you have only one input\n   * and want to show only `Done` button. Default to `true`.\n   */\n  showArrows?: boolean;\n  /**\n   * A callback that is called when the user presses the next button along with the default action.\n   */\n  onNextCallback?: (event: GestureResponderEvent) => void;\n  /**\n   * A callback that is called when the user presses the previous button along with the default action.\n   */\n  onPrevCallback?: (event: GestureResponderEvent) => void;\n  /**\n   * A callback that is called when the user presses the done button along with the default action.\n   */\n  onDoneCallback?: (event: GestureResponderEvent) => void;\n  /**\n   * A component that applies blur effect to the toolbar.\n   */\n  blur?: React.JSX.Element | null;\n  /**\n   * A value for container opacity in hexadecimal format (e.g. `ff`). Default value is `ff`.\n   */\n  opacity?: HEX;\n  /**\n   * A object containing `left`/`right` properties. Used to specify proper container padding in landscape mode.\n   */\n  insets?: SafeAreaInsets;\n} & Pick<KeyboardStickyViewProps, \"offset\" | \"enabled\">;\n\n/**\n * `KeyboardToolbar` is a component that is shown above the keyboard with `Prev`/`Next` buttons from left and\n * `Done` button from the right (to dismiss the keyboard). Allows to add customizable content (yours UI elements) in the middle.\n *\n * @param props - Component props.\n * @returns A component that is shown above the keyboard with `Prev`/`Next` and `Done` buttons.\n * @see {@link https://kirillzyusko.github.io/react-native-keyboard-controller/docs/api/components/keyboard-toolbar|Documentation} page for more details.\n * @example\n * ```tsx\n * <KeyboardToolbar doneText=\"Close\" />\n * ```\n */\nconst KeyboardToolbar: React.FC<KeyboardToolbarProps> = (props) => {\n  const {\n    content,\n    theme = colors,\n    doneText = \"Done\",\n    button,\n    icon,\n    showArrows = true,\n    onNextCallback,\n    onPrevCallback,\n    onDoneCallback,\n    blur = null,\n    opacity = DEFAULT_OPACITY,\n    offset: { closed = 0, opened = 0 } = {},\n    enabled = true,\n    insets,\n    ...rest\n  } = props;\n  const colorScheme = useKeyboardState((state) => state.appearance);\n  const [inputs, setInputs] = useState({\n    current: 0,\n    count: 0,\n  });\n  const isPrevDisabled = inputs.current === 0;\n  const isNextDisabled = inputs.current === inputs.count - 1;\n\n  useEffect(() => {\n    const subscription = FocusedInputEvents.addListener(\"focusDidSet\", (e) => {\n      setInputs(e);\n    });\n\n    return subscription.remove;\n  }, []);\n  const doneStyle = useMemo(\n    () => [styles.doneButton, { color: theme[colorScheme].primary }],\n    [colorScheme, theme],\n  );\n  const toolbarStyle = useMemo(\n    () => [\n      styles.toolbar,\n      {\n        backgroundColor: `${theme[colorScheme].background}${opacity}`,\n      },\n      !KEYBOARD_HAS_ROUNDED_CORNERS\n        ? {\n            paddingLeft: insets?.left,\n            paddingRight: insets?.right,\n          }\n        : null,\n      KEYBOARD_HAS_ROUNDED_CORNERS ? styles.floating : null,\n    ],\n    [colorScheme, opacity, theme, insets],\n  );\n  const containerStyle = useMemo(\n    () => [\n      KEYBOARD_HAS_ROUNDED_CORNERS\n        ? {\n            marginLeft: (insets?.left ?? 0) + 16,\n            marginRight: (insets?.right ?? 0) + 16,\n          }\n        : null,\n    ],\n    [insets],\n  );\n  const offset = useMemo(\n    () => ({\n      closed: closed + KEYBOARD_TOOLBAR_HEIGHT,\n      opened: opened + OPENED_OFFSET,\n    }),\n    [closed, opened],\n  );\n  const ButtonContainer = button || Button;\n  const IconContainer = icon || Arrow;\n\n  const onPressNext = useCallback(\n    (event: GestureResponderEvent) => {\n      onNextCallback?.(event);\n\n      if (!event.isDefaultPrevented()) {\n        KeyboardController.setFocusTo(\"next\");\n      }\n    },\n    [onNextCallback],\n  );\n  const onPressPrev = useCallback(\n    (event: GestureResponderEvent) => {\n      onPrevCallback?.(event);\n\n      if (!event.isDefaultPrevented()) {\n        KeyboardController.setFocusTo(\"prev\");\n      }\n    },\n    [onPrevCallback],\n  );\n  const onPressDone = useCallback(\n    (event: GestureResponderEvent) => {\n      onDoneCallback?.(event);\n\n      if (!event.isDefaultPrevented()) {\n        KeyboardController.dismiss();\n      }\n    },\n    [onDoneCallback],\n  );\n\n  return (\n    <KeyboardStickyView\n      enabled={enabled}\n      offset={offset}\n      style={containerStyle}\n    >\n      <View {...rest} style={toolbarStyle} testID={TEST_ID_KEYBOARD_TOOLBAR}>\n        {blur}\n        {showArrows && (\n          <View style={styles.arrows}>\n            <ButtonContainer\n              accessibilityHint=\"Moves focus to the previous field\"\n              accessibilityLabel=\"Previous\"\n              disabled={isPrevDisabled}\n              testID={TEST_ID_KEYBOARD_TOOLBAR_PREVIOUS}\n              theme={theme}\n              onPress={onPressPrev}\n            >\n              <IconContainer\n                disabled={isPrevDisabled}\n                theme={theme}\n                type=\"prev\"\n              />\n            </ButtonContainer>\n            <ButtonContainer\n              accessibilityHint=\"Moves focus to the next field\"\n              accessibilityLabel=\"Next\"\n              disabled={isNextDisabled}\n              testID={TEST_ID_KEYBOARD_TOOLBAR_NEXT}\n              theme={theme}\n              onPress={onPressNext}\n            >\n              <IconContainer\n                disabled={isNextDisabled}\n                theme={theme}\n                type=\"next\"\n              />\n            </ButtonContainer>\n          </View>\n        )}\n\n        <View style={styles.flex} testID={TEST_ID_KEYBOARD_TOOLBAR_CONTENT}>\n          {content}\n        </View>\n        {doneText && (\n          <ButtonContainer\n            accessibilityHint=\"Closes the keyboard\"\n            accessibilityLabel=\"Done\"\n            rippleRadius={28}\n            style={styles.doneButtonContainer}\n            testID={TEST_ID_KEYBOARD_TOOLBAR_DONE}\n            theme={theme}\n            onPress={onPressDone}\n          >\n            <Text maxFontSizeMultiplier={1.3} style={doneStyle}>\n              {doneText}\n            </Text>\n          </ButtonContainer>\n        )}\n      </View>\n    </KeyboardStickyView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  flex: {\n    flex: 1,\n  },\n  toolbar: {\n    position: \"absolute\",\n    bottom: 0,\n    alignItems: \"center\",\n    width: \"100%\",\n    flexDirection: \"row\",\n    height: KEYBOARD_TOOLBAR_HEIGHT,\n  },\n  arrows: {\n    flexDirection: \"row\",\n    paddingLeft: 8,\n  },\n  doneButton: {\n    fontWeight: \"600\",\n    fontSize: 15,\n  },\n  doneButtonContainer: {\n    marginRight: 16,\n    marginLeft: 8,\n  },\n  floating: {\n    alignSelf: \"center\",\n    borderRadius: 20,\n    overflow: \"hidden\",\n  },\n});\n\nexport { colors as DefaultKeyboardToolbarTheme };\nexport default KeyboardToolbar;\n"],"mappings":"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","ignoreList":[]}